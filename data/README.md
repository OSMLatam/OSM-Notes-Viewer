# Data Directory

This directory contains the JSON data files generated by OSM-Notes-Analytics.

⚠️ **IMPORTANT:** This directory is tracked in `.gitignore` and should NOT be committed to git. In
production, data is served from a shared directory or CDN.

## Structure

```
data/
├── metadata.json          # Export metadata
├── indexes/
│   ├── users.json        # User index (for search)
│   └── countries.json    # Country index (for search)
├── users/
│   └── {user_id}.json    # Individual user profiles
└── countries/
    └── {country_id}.json # Individual country profiles
```

## Getting Data

### Option 1: Local Development (Recommended)

Use the provided script to sync data from OSM-Notes-Analytics:

```bash
./scripts/sync-data.sh
```

Or manually copy:

```bash
# From the analytics repository
cd /path/to/OSM-Notes-Analytics
./bin/dwh/exportDatamartsToJSON.sh

# Copy to viewer
cp -r output/json/* /path/to/OSM-Notes-Viewer/data/
```

### Option 2: Create Sample Data

For testing without real data:

```bash
./scripts/create-sample-data.sh
```

### Option 3: Production

In production, configure `config/api-config.js` to point to your CDN or shared directory:

```javascript
// For shared directory (recommended)
BASE_URL: '/data'; // Served by web server from /var/www/osm-notes-data

// For CDN
BASE_URL: 'https://cdn.example.com/api';
```

## Sample Data (for testing)

Create minimal sample files for local development:

**metadata.json:**

```json
{
  "export_date": "2025-10-21T12:00:00Z",
  "total_users": 2,
  "total_countries": 1,
  "version": "1.0.0"
}
```

**indexes/users.json:**

```json
[
  {
    "user_id": 1,
    "username": "test_user",
    "history_whole_open": 100,
    "history_whole_closed": 50,
    "history_year_open": 10,
    "history_year_closed": 5
  }
]
```

**indexes/countries.json:**

```json
[
  {
    "country_id": 1,
    "country_name": "Test Country",
    "country_name_en": "Test Country",
    "country_name_es": "País de Prueba",
    "history_whole_open": 1000,
    "history_whole_closed": 500,
    "history_year_open": 100,
    "history_year_closed": 50
  }
]
```

## .gitignore

The `data/` directory is included in `.gitignore` to avoid committing large JSON files to the
repository.

For production, data should be hosted separately on a CDN or object storage service.
